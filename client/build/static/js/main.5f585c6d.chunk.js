(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,n){},127:function(e,n){},129:function(e,n){},148:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(70),i=t.n(o),c=(t(81),t(1)),u=t(75),l=t(3),s=t(5),d=t(2),f=t(71),m=t.n(f)()("/");function p(){var e=Object(c.a)(["\n  height: 40px;\n  margin-top: 35px;\n  outline: none;\n  border: none;\n  border-radius: 15px;\n  color: #d8e9ef;\n  background-color: #4ea1d3;\n  font-size: 25px;\n  font-weight: 500;\n\n  :hover {\n    background-color: #7bb1d1;\n    cursor: pointer;\n  }\n"]);return p=function(){return e},e}function v(){var e=Object(c.a)(["\n  margin-top: 10px;\n  font-size: 20px;\n  color: #e85a71;\n"]);return v=function(){return e},e}function b(){var e=Object(c.a)(["\n  width: 150px;\n  height: 35px;\n  margin-left: 15px;\n  padding-left: 10px;\n  outline: none;\n  border: none;\n  border-radius: 5px;\n"]);return b=function(){return e},e}function h(){var e=Object(c.a)([""]);return h=function(){return e},e}function g(){var e=Object(c.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin-top: 15px;\n  line-height: 35px;\n"]);return g=function(){return e},e}function x(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return x=function(){return e},e}var E=d.a.div(x()),j=d.a.div(g()),O=d.a.label(h()),k=d.a.input(b()),w=d.a.div(v()),y=d.a.button(p()),N=function(e){var n=Object(r.useRef)(),t=Object(r.useRef)(),o=Object(r.useState)(!1),i=Object(s.a)(o,2),c=i[0],u=i[1],l=Object(r.useState)(""),d=Object(s.a)(l,2),f=d[0],p=d[1];return Object(r.useEffect)((function(){m.on("FE-error-user-exist",(function(r){var a=r.error;if(a)u(a),p("User name already exist");else{var o=n.current.value,i=t.current.value;sessionStorage.setItem("user",i),e.history.push("/room/".concat(o))}}))}),[e.history]),a.a.createElement(E,null,a.a.createElement(j,null,a.a.createElement(O,{htmlFor:"roomName"},"Room Name"),a.a.createElement(k,{type:"text",id:"roomName",ref:n})),a.a.createElement(j,null,a.a.createElement(O,{htmlFor:"userName"},"User Name"),a.a.createElement(k,{type:"text",id:"userName",ref:t})),a.a.createElement(y,{onClick:function(){var e=n.current.value,r=t.current.value;e&&r?m.emit("BE-check-user",{roomId:e,userName:r}):(u(!0),p("Enter Room Name or User Name"))}}," Join "),c?a.a.createElement(w,null,f):null)},S=t(25),z=t(13),I=t(11),C=t(41),D=t.n(C);function R(){var e=Object(c.a)(["\n  font-size: 15px;\n  margin-right: 10px;\n"]);return R=function(){return e},e}function T(){var e=Object(c.a)(["\n  position: relative;\n"]);return T=function(){return e},e}function U(){var e=Object(c.a)(["\n  position: absolute;\n  bottom: 10px;\n  right: 0;\n  z-index: 5;\n"]);return U=function(){return e},e}function F(){var e=Object(c.a)(["\n  width: 100%;\n  height: 100%;\n"]);return F=function(){return e},e}var B=d.a.video(F()),V=d.a.div(U()),A=d.a.div(T()),q=d.a.i(R()),M=function(e){var n=Object(r.useRef)(),t=e.peer,o=e.mic,i=e.video;return Object(r.useEffect)((function(){t.on("stream",(function(e){n.current.srcObject=e})),t.on("track",(function(e,n){}))}),[t]),a.a.createElement(A,null,a.a.createElement(B,{playsInline:!0,autoPlay:!0,ref:n}),a.a.createElement(V,null,o?a.a.createElement(q,{className:"fas fa-microphone"}):a.a.createElement(q,{style:{right:"15px"},className:"fas fa-microphone-slash"}),i?a.a.createElement(q,{className:"fas fa-video"}):a.a.createElement(q,{style:{left:"15px"},className:"fas fa-video-slash"})))};function P(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: -65.95px;\n  background-color: #008b8b;\n  color: white;\n  padding-top: 5px;\n  padding-right: 10px;\n  padding-bottom: 5px;\n  padding-left: 10px;\n  text-align: left;\n\n  > div {\n    font-size: 0.85rem;\n    padding: 1px;\n    margin-bottom: 5px;\n\n    :not(:last-child):hover {\n      background-color: 008b8b;\n      cursor: pointer;\n    }\n  }\n\n  > div:last-child {\n    border-top: 1px solid white;\n    cursor: context-menu !important;\n  }\n"]);return P=function(){return e},e}function L(){var e=Object(c.a)(["\n  display: flex;\n  position: absolute;\n  width: 20px;\n  top: 0;\n  right: 0;\n  z-index: 1;\n\n  :hover {\n    background-color: #12aaaa;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n\n  > i {\n    width: 90%;\n    font-size: calc(10px + 1vmin);\n  }\n"]);return L=function(){return e},e}function J(){var e=Object(c.a)(["\n  position: relative;\n  width: 75px;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #12aaaa;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n\n  .fa-microphone-slash {\n    color: #ee2560;\n  }\n\n  .fa-video-slash {\n    color: #ee2560;\n  }\n"]);return J=function(){return e},e}function _(){var e=Object(c.a)(["\n  width: 70px;\n  height: 30px;\n  border: none;\n  font-size: 0.9375rem;\n  line-height: 30px;\n  margin-right: 15px;\n  background-color: #ee2560;\n  border-radius: 15px;\n\n  :hover {\n    background-color: #f25483;\n    cursor: pointer;\n  }\n"]);return _=function(){return e},e}function W(){var e=Object(c.a)(["\n  font-size: 20px;\n\n  @media (max-width: 700px) {\n    font-size: 16px;\n  }\n"]);return W=function(){return e},e}function Y(){var e=Object(c.a)(["\n  width: auto;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #12aaaa;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  .sharing {\n    color: #ee2560;\n  }\n"]);return Y=function(){return e},e}function K(){var e=Object(c.a)(["\n  width: 75px;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n  position: relative;\n  :hover {\n    background-color: #12aaaa;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n"]);return K=function(){return e},e}function $(){var e=Object(c.a)([""]);return $=function(){return e},e}function G(){var e=Object(c.a)(["\n  flex: 1;\n  flex-wrap: wrap;\n  display: flex;\n  justify-content: center;\n"]);return G=function(){return e},e}function H(){var e=Object(c.a)(["\n  background: #673ab7;\n  border-radius: 50px;\n  position: absolute;\n  right: 0px;\n  top: -2px;\n  padding: 3px;\n"]);return H=function(){return e},e}function Q(){var e=Object(c.a)(["\n  font-size: 13px;\n  @media (max-width: 700px) {\n    font-size: 11px;\n  }\n"]);return Q=function(){return e},e}function X(){var e=Object(c.a)(["\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 500;\n  background-color: #008b8b;\n  z-index: 100;\n"]);return X=function(){return e},e}var Z=d.a.div(X()),ee=d.a.span(Q()),ne=d.a.span(H()),te=d.a.div(G()),re=d.a.div($()),ae=d.a.div(K()),oe=d.a.div(Y()),ie=d.a.i(W()),ce=d.a.div(_()),ue=d.a.div(J()),le=d.a.div(L()),se=d.a.div(P()),de=function(e){var n=e.clickChat,t=e.clickCameraDevice,o=e.goToBack,i=e.toggleCameraAudio,c=e.userVideoAudio,u=e.clickScreenSharing,l=e.screenShare,s=e.videoDevices,d=e.showVideoDevices,f=e.setShowVideoDevices,m=e.showUserList,p=e.usersCount,v=Object(r.useCallback)((function(e){f((function(e){return!e}))}),[f]);return a.a.createElement(Z,null,a.a.createElement(te,null,a.a.createElement("div",{style:{position:"relative"}},a.a.createElement(ue,{onClick:i,"data-switch":"video"},a.a.createElement("div",null,c.video?a.a.createElement(ie,{className:"fas fa-video"}):a.a.createElement(ie,{className:"fas fa-video-slash"})),a.a.createElement(ee,null,"Camera"),d&&a.a.createElement(se,null,s.length>0&&s.map((function(e){return a.a.createElement("div",{key:e.deviceId,onClick:t,"data-value":e.deviceId},e.label)})),a.a.createElement("div",null,"Switch Camera"))),a.a.createElement(le,{onClick:v},a.a.createElement("i",{className:"fas fa-angle-up"}))),a.a.createElement(ue,{onClick:i,"data-switch":"audio"},a.a.createElement("div",null,c.audio?a.a.createElement(ie,{className:"fas fa-microphone"}):a.a.createElement(ie,{className:"fas fa-microphone-slash"})),a.a.createElement(ee,null,"Audio")),a.a.createElement(oe,{onClick:u},a.a.createElement("div",null,a.a.createElement(ie,{className:"fas fa-desktop ".concat(l?"sharing":"")})),l?a.a.createElement(ee,null,"Stop Sharing"):a.a.createElement(ee,null,"Share Screen")),a.a.createElement(ae,{onClick:n},a.a.createElement("div",null,a.a.createElement(ie,{className:"fas fa-comments"})),a.a.createElement(ee,null,"Chat")),a.a.createElement(ae,{onClick:m},a.a.createElement(ne,null,a.a.createElement(ee,null,p)),a.a.createElement("div",null,a.a.createElement(ie,{className:"fas fa-users"})),a.a.createElement(ee,null,"Participants"))),a.a.createElement(re,null,a.a.createElement(ce,{onClick:o},a.a.createElement(ee,null,"End Call"))))},fe=t(10),me=t.n(fe);function pe(){var e=Object(c.a)(["\n  bottom: 0;\n  width: 100%;\n  height: 8%;\n  padding: 15px;\n  border-top: 1px solid rgb(69, 69, 82, 0.25);\n  box-sizing: border-box;\n  opacity: 0.7;\n\n  :focus {\n    outline: none;\n  }\n"]);return pe=function(){return e},e}function ve(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  width: 100%;\n  font-size: 16px;\n  margin-top: 15px;\n  text-align: right;\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 7px;\n    border-radius: 7px;\n    background-color: #2196f3;\n    color: white;\n    font-size: 14px;\n    text-align: left;\n  }\n"]);return ve=function(){return e},e}function be(){var e=Object(c.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  font-size: 16px;\n  margin-top: 15px;\n  text-align: left;\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 7px;\n    border-radius: 7px;\n    font-size: 14px;\n    background: darkcyan;\n    color: white;\n  }\n"]);return be=function(){return e},e}function he(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n"]);return he=function(){return e},e}function ge(){var e=Object(c.a)(["\n  width: 100%;\n  height: 83%;\n  max-height: 83%;\n  overflow-x: hidden;\n  overflow-y: auto;\n"]);return ge=function(){return e},e}function xe(){var e=Object(c.a)(["\n  width: 100%;\n  margin-top: 15px;\n  font-weight: 600;\n  font-size: 20px;\n  color: black;\n"]);return xe=function(){return e},e}function Ee(){var e=Object(c.a)(["\n  font-size: 13px;\n  color: black;\n"]);return Ee=function(){return e},e}function je(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 25%;\n  hieght: 100%;\n  background-color: white;\n  transition: all 0.5s ease;\n  overflow: hidden;\n"]);return je=function(){return e},e}var Oe=d.a.div(je()),ke=d.a.span(Ee()),we=d.a.div(xe()),ye=d.a.div(ge()),Ne=d.a.div(he()),Se=d.a.div(be()),ze=d.a.div(ve()),Ie=d.a.input(pe()),Ce=function(e){var n=e.display,t=e.roomId,o=e.openChat,i=sessionStorage.getItem("user"),c=Object(r.useState)([]),u=Object(s.a)(c,2),l=u[0],d=u[1],f=Object(r.useRef)(null),p=Object(r.useRef)();Object(r.useEffect)((function(){var e=function(e){var t=e.msg,r=e.sender;d((function(e){return[].concat(Object(S.a)(e),[{sender:r,msg:t}])})),n||me()(a.a.createElement("span",{onClick:function(){return o(!0)},style:{cursor:"pointer"}},"New Message from ",r))};return m.on("FE-receive-message",e),function(){m.off("FE-receive-message",e)}}),[n]),Object(r.useEffect)((function(){v()}),[l]);var v=function(){f.current.scrollIntoView({behavior:"smooth"})};return a.a.createElement(Oe,{className:n?"":"width0"},a.a.createElement(we,null,"Chat Room"),a.a.createElement(ye,null,a.a.createElement(Ne,null,l&&l.map((function(e,n){var t=e.sender,r=e.msg;return t!==i?a.a.createElement(Se,{key:n},a.a.createElement(ke,null,t),a.a.createElement("p",null,r)):a.a.createElement(ze,{key:n},a.a.createElement(ke,null,"You"),a.a.createElement("p",null,r))})),a.a.createElement("div",{style:{float:"left",clear:"both"},ref:f}))),a.a.createElement(Ie,{ref:p,onKeyUp:function(e){if("Enter"===e.key){var n=e.target.value;n&&(m.emit("BE-send-message",{roomId:t,msg:n,sender:i}),p.current.value="")}},placeholder:"Enter your message"}))};function De(){var e=Object(c.a)(["\n  font-size: 16px;\n"]);return De=function(){return e},e}function Re(){var e=Object(c.a)(["\n  background-color: #6269e9;\n  margin: 5px;\n  display: flex;\n  justify-content: space-between;\n  padding: 10px;\n  border-radius: 10px;\n  align-items: center;\n"]);return Re=function(){return e},e}function Te(){var e=Object(c.a)(["\n  width: 100%;\n  margin-top: 15px;\n  font-weight: 600;\n  font-size: 20px;\n  color: black;\n"]);return Te=function(){return e},e}function Ue(){var e=Object(c.a)(["\n  font-size: 16px;\n"]);return Ue=function(){return e},e}function Fe(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 25%;\n  hieght: 100%;\n  background-color: white;\n  transition: all 0.5s ease;\n  overflow: hidden;\n"]);return Fe=function(){return e},e}var Be=d.a.div(Fe()),Ve=d.a.i(Ue()),Ae=d.a.div(Te()),qe=d.a.div(Re()),Me=d.a.span(De()),Pe=function(e){var n=e.display,t=e.users;return a.a.createElement(Be,{className:n?"":"width0"},a.a.createElement(Ae,null,"Users List"),a.a.createElement(qe,null,a.a.createElement(Me,null,"You"),a.a.createElement("div",{style:{display:"flex",gap:"10px"}},a.a.createElement(Ve,{className:t.localUser.audio?"fas fa-microphone":"fas fa-microphone-slash"}),a.a.createElement(Ve,{className:t.localUser.video?"fas fa-video":"fas fa-video-slash"}))),Object.entries(t).map((function(e){var n=Object(s.a)(e,2),t=n[0],r=n[1];return"localUser"!==t&&a.a.createElement(qe,{key:t},a.a.createElement(Me,null,t),a.a.createElement("div",{style:{display:"flex",gap:"10px"}},a.a.createElement(Ve,{className:r.audio?"fas fa-microphone":"fas fa-microphone-slash"}),a.a.createElement(Ve,{className:r.video?"fas fa-video":"fas fa-video-slash"})))})))};function Le(){var e=Object(c.a)(["\n  position: absolute;\n  right: 15px;\n  top: 15px;\n  z-index: 1;\n"]);return Le=function(){return e},e}function Je(){var e=Object(c.a)(["\n  position: absolute;\n  z-index: 1;\n  background: #673ab7;\n  bottom: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return Je=function(){return e},e}function _e(){var e=Object(c.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  > video {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  :hover {\n    > i {\n      display: block;\n    }\n  }\n"]);return _e=function(){return e},e}function We(){var e=Object(c.a)(["\n  width: 250px;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n"]);return We=function(){return e},e}function Ye(){var e=Object(c.a)(["\n  position: relative;\n  width: 100%;\n  height: 100vh;\n"]);return Ye=function(){return e},e}function Ke(){var e=Object(c.a)(["\n  max-width: 100%;\n  height: 92%;\n  position: relative;\n  display: flex;\n  overflow: auto;\n  flex-direction: row;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  align-items: center;\n  padding: 15px;\n  box-sizing: border-box;\n  gap: 10px;\n"]);return Ke=function(){return e},e}function $e(){var e=Object(c.a)(["\n  display: flex;\n  width: 100%;\n  max-height: 100vh;\n  flex-direction: row;\n"]);return $e=function(){return e},e}var Ge=d.a.div($e()),He=d.a.div(Ke()),Qe=d.a.div(Ye()),Xe=d.a.video(We()),Ze=d.a.div(_e()),en=d.a.div(Je()),nn=d.a.i(Le()),tn=function(e){var n=sessionStorage.getItem("user"),t=Object(r.useState)([]),o=Object(s.a)(t,2),i=o[0],c=o[1],u=Object(r.useState)({localUser:{video:!0,audio:!0}}),l=Object(s.a)(u,2),d=l[0],f=l[1],p=Object(r.useState)([]),v=Object(s.a)(p,2),b=v[0],h=v[1],g=Object(r.useState)(!1),x=Object(s.a)(g,2),E=x[0],j=x[1],O=Object(r.useState)(!1),k=Object(s.a)(O,2),w=k[0],y=k[1],N=Object(r.useState)(!1),C=Object(s.a)(N,2),R=C[0],T=C[1],U=Object(r.useState)(!1),F=Object(s.a)(U,2),B=F[0],V=F[1],A=Object(r.useState)(!1),q=Object(s.a)(A,2),P=q[0],L=q[1],J=Object(r.useRef)([]),_=Object(r.useRef)(),W=Object(r.useRef)(),Y=Object(r.useRef)(),K=e.match.params.roomId;function $(e){return J.current.find((function(n){return n.peerID===e}))}Object(r.useEffect)((function(){return navigator.mediaDevices.enumerateDevices().then((function(e){var n=e.filter((function(e){return"videoinput"===e.kind}));h(n)})),window.addEventListener("popstate",Q),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){_.current.srcObject=e,Y.current=e,m.emit("BE-join-room",{roomId:K,userName:n}),m.on("FE-user-join",(function(t,r){me()("".concat(r," joined"),{icon:"\ud83d\udc4f",style:{borderRadius:"15px"}});var a=[];t.forEach((function(t){var r=t.userId,o=t.info,i=o.userName,c=o.video,u=o.audio;if(i!==n){var l=function(e,n,t){var r=new D.a({initiator:!0,trickle:!1,stream:t});return r.on("signal",(function(t){m.emit("BE-call-user",{userToCall:e,from:n,signal:t})})),r.on("disconnect",(function(){r.destroy()})),r}(r,m.id,e);l.userName=i,l.peerID=r,J.current.push({peerID:r,peer:l,userName:i}),a.push(l),f((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(z.a)({},l.userName,{video:c,audio:u}))}))}})),c(a)})),m.on("FE-receive-call",(function(n){var t=n.signal,r=n.from,a=n.info,o=a.userName,i=a.video,u=a.audio;if(!$(r)){var l=function(e,n,t){var r=new D.a({initiator:!1,trickle:!1,stream:t});return r.on("signal",(function(e){m.emit("BE-accept-call",{signal:e,to:n})})),r.on("disconnect",(function(){r.destroy()})),r.signal(e),r}(t,r,e);l.userName=o,J.current.push({peerID:r,peer:l,userName:o}),c((function(e){return[].concat(Object(S.a)(e),[l])})),f((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(z.a)({},l.userName,{video:i,audio:u}))}))}})),m.on("FE-call-accepted",(function(e){var n=e.signal;$(e.answerId).peer.signal(n)})),m.on("FE-user-leave",(function(e){var n=e.userId,t=e.userName,r=$(n);r.peer.destroy(),c((function(e){return e=e.filter((function(e){return e.peerID!==r.peer.peerID})),Object(S.a)(e)})),J.current=J.current.filter((function(e){return e.peerID!==n})),f((function(e){return Object.fromEntries(Object.entries(e).filter((function(e){return Object(s.a)(e,1)[0]!==t})))})),me()("".concat(t," left"),{style:{background:"#333",borderRadius:"15px"}})}))})),m.on("FE-toggle-camera",(function(e){var n=e.userId,t=e.switchTarget,r=$(n);f((function(e){var n=e[r.userName].video,a=e[r.userName].audio;return"video"===t?n=!n:a=!a,Object(I.a)(Object(I.a)({},e),{},Object(z.a)({},r.userName,{video:n,audio:a}))}))})),m.on("FE-share-screen",(function(e){var n=e.username,t=e.isSharing;V(t),t?me()("".concat(n," is sharing screen"),{style:{borderRadius:"15px"}}):me()("Screen sharing stopped",{style:{background:"#d34f4f",borderRadius:"15px"}})})),function(){m.disconnect()}}),[]);var G=function(e){var n=e.target;n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen&&n.msRequestFullscreen()};function H(e,n,t){var r,o;return a.a.createElement(Ze,{style:{width:"350px"},onClick:B?G:null,key:n},B&&a.a.createElement(nn,{className:"fas fa-expand"}),function(e,n){if(d.hasOwnProperty(e)&&!d[e].video&&!B)return a.a.createElement(en,{key:e},e)}(e.userName),a.a.createElement(M,{key:n,peer:e,mic:null===(r=d[e.userName])||void 0===r?void 0:r.audio,video:null===(o=d[e.userName])||void 0===o?void 0:o.video}))}var Q=function(e){e.preventDefault(),m.emit("BE-leave-room",{roomId:K,leaver:n}),sessionStorage.removeItem("user"),window.location.href="/"};return a.a.createElement(Ge,{onClick:function(){P&&L(!1)}},a.a.createElement(Qe,null,a.a.createElement(He,null,a.a.createElement(Xe,{ref:_,muted:!0,autoPlay:!0,playInline:!0}),i&&i.map((function(e,n,t){return H(e,n)}))),a.a.createElement(de,{clickScreenSharing:function(){R?W.current.onended():navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){var t=e.getTracks()[0];J.current.forEach((function(e){e.peer._pc.getSenders().forEach((function(e){"video"===e.track.kind&&e.replaceTrack(t)}))})),_.current.srcObject=e,W.current=t,T(!0),m.emit("BE-share-screen",{roomId:K,username:n,isSharing:!0}),t.onended=function(){J.current.forEach((function(e){e.peer._pc.getSenders().forEach((function(e){"video"===e.track.kind&&e.replaceTrack(Y.current.getVideoTracks()[0])}))})),_.current.srcObject=Y.current,m.emit("BE-share-screen",{roomId:K,currentUser:n,isSharing:!1}),T(!1)}})).catch((function(e){console.error("Error accessing screen sharing:",e)}))},clickChat:function(e){e.stopPropagation(),y(!w)},clickCameraDevice:function(e){if(e&&e.target&&e.target.dataset&&e.target.dataset.value){var n=e.target.dataset.value,t=_.current.srcObject.getAudioTracks()[0].enabled;navigator.mediaDevices.getUserMedia({video:{deviceId:n},audio:t}).then((function(e){var n=e.getTracks().find((function(e){return"video"===e.kind})),t=Y.current.getTracks().find((function(e){return"video"===e.kind}));Y.current.removeTrack(t),Y.current.addTrack(n),J.current.forEach((function(e){e.peer.replaceTrack(t,n,Y.current)}))}))}},goToBack:Q,toggleCameraAudio:function(e){var n=e.target.getAttribute("data-switch");if("video"===n)!0===d.localUser.video?(_.current.style.display="none",Y.current.getVideoTracks().forEach((function(e){return e.stop()}))):navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){_.current.style.display="block",_.current.srcObject=e,Y.current=e,function(e){J.current.forEach((function(n){n.peer._pc.getSenders().forEach((function(n){"video"===n.track.kind?n.replaceTrack(e.getVideoTracks()[0]):"audio"===n.track.kind&&n.replaceTrack(e.getAudioTracks()[0])}))}))}(e)}));else{var t,r=null===(t=_.current)||void 0===t?void 0:t.srcObject;if(r){var a=r.getAudioTracks();a&&a.length>0?a[0].enabled=!d.localUser.audio:alert("No audio track found")}else alert("User stream not available")}f((function(e){var t=e.localUser.video,r=e.localUser.audio;return"video"===n?!0===t?t=!1:(t=!0,r=!0):r=!r,Object(I.a)(Object(I.a)({},e),{},{localUser:{video:t,audio:r}})})),m.emit("BE-toggle-camera-audio",{roomId:K,switchTarget:n})},userVideoAudio:d.localUser,screenShare:R,videoDevices:b,showVideoDevices:P,setShowVideoDevices:L,showUserList:function(e){e.stopPropagation(),j(!E)},usersCount:Object.keys(d).length})),a.a.createElement(Ce,{display:w,openChat:y,roomId:K}),a.a.createElement(Pe,{display:E,users:d}))};function rn(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(8px + 2vmin);\n  color: white;\n  background-color: #454552;\n  text-align: center;\n"]);return rn=function(){return e},e}var an=d.a.div(rn()),on=function(){return a.a.createElement(u.a,null,a.a.createElement(an,null,a.a.createElement(l.c,null,a.a.createElement(l.a,{exact:!0,path:"/",component:N}),a.a.createElement(l.a,{exact:!0,path:"/room/:roomId",component:tn})),a.a.createElement(fe.Toaster,{position:"top-right",toastOptions:{duration:2e3,style:{background:"#008b8b",color:"#fff",fontSize:"16px"}}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(on,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,n,t){e.exports=t(148)},81:function(e,n,t){}},[[76,1,2]]]);
//# sourceMappingURL=main.5f585c6d.chunk.js.map