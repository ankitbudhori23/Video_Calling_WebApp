{"version":3,"sources":["socket.js","components/Main/Main.js","components/Video/VideoCard.js","components/BottomBar/BottomBar.js","components/Chat/Chat.js","components/Chat/ShowAllUser.js","components/Room/Room.js","App.js","serviceWorker.js","index.js"],"names":["sockets","io","MainContainer","styled","div","Row","Label","label","Input","input","Error","JoinButton","button","Main","props","roomRef","useRef","userRef","useState","err","setErr","errMsg","setErrMsg","useEffect","socket","on","error","roomName","current","value","userName","sessionStorage","setItem","history","push","htmlFor","type","id","ref","onClick","emit","roomId","Video","video","Toggle","UserVid","FaIcon","i","VideoCard","peer","mic","stream","srcObject","track","playsInline","autoPlay","className","style","right","left","Bar","Text","span","Barge","Center","Right","ChatButton","ScreenButton","StopButton","CameraButton","SwitchMenu","SwitchList","BottomBar","clickChat","clickCameraDevice","goToBack","toggleCameraAudio","userVideoAudio","clickScreenSharing","screenShare","videoDevices","showVideoDevices","setShowVideoDevices","showUserList","usersCount","handleToggle","useCallback","e","state","position","data-switch","length","map","device","key","deviceId","data-value","audio","ChatContainer","Name","TopHeader","ChatArea","MessageList","Message","UserMessage","BottomInput","Chat","display","openChat","currentUser","getItem","msg","setMsg","messagesEndRef","inputRef","receiveMessageHandler","sender","msgs","toast","cursor","off","scrollToBottom","scrollIntoView","behavior","idx","float","clear","onKeyUp","target","placeholder","Card","users","gap","Object","entries","RoomContainer","VideoContainer","VideoAndBarContainer","MyVideo","VideoBox","UserName","Room","peers","setPeers","localUser","setUserVideoAudio","setVideoDevices","displayUserList","setDisplayUserList","displayChat","setDisplayChat","setScreenShare","userShareScreen","setUserShareScreen","peersRef","userVideoRef","screenTrackRef","userStream","match","params","findPeer","find","p","peerID","navigator","mediaDevices","enumerateDevices","then","devices","filtered","filter","kind","window","addEventListener","getUserMedia","icon","borderRadius","forEach","userId","info","caller","Peer","initiator","trickle","signal","userToCall","from","destroy","createPeer","preList","incomingSignal","callerId","to","addPeer","answerId","peerIdx","user","fromEntries","background","switchTarget","username","isSharing","disconnect","expandScreen","elem","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","createUserVideo","index","arr","width","hasOwnProperty","writeUserName","preventDefault","leaver","removeItem","location","href","muted","playInline","onended","getDisplayMedia","screenTrack","getTracks","_pc","getSenders","replaceTrack","getVideoTracks","catch","console","stopPropagation","event","dataset","enabledAudio","getAudioTracks","enabled","newStreamTrack","oldStreamTrack","removeTrack","addTrack","getAttribute","stop","updatePeerConnections","audioTracks","alert","videoSwitch","audioSwitch","keys","AppContainer","App","exact","path","component","toastOptions","duration","color","fontSize","Boolean","hostname","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5f585c6d.chunk.js","sourcesContent":["import io from \"socket.io-client\";\n// const sockets = io(\"http://localhost:3001/\", {\n//   autoConnect: true,\n//   forceNew: true,\n// });\nconst sockets = io(\"/\");\nexport default sockets;\n","import React, { useRef, useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport socket from \"../../socket\";\nconst Main = (props) => {\n  const roomRef = useRef();\n  const userRef = useRef();\n  const [err, setErr] = useState(false);\n  const [errMsg, setErrMsg] = useState(\"\");\n\n  useEffect(() => {\n    socket.on(\"FE-error-user-exist\", ({ error }) => {\n      if (!error) {\n        const roomName = roomRef.current.value;\n        const userName = userRef.current.value;\n\n        sessionStorage.setItem(\"user\", userName);\n        props.history.push(`/room/${roomName}`);\n      } else {\n        setErr(error);\n        setErrMsg(\"User name already exist\");\n      }\n    });\n  }, [props.history]);\n\n  function clickJoin() {\n    const roomName = roomRef.current.value;\n    const userName = userRef.current.value;\n\n    if (!roomName || !userName) {\n      setErr(true);\n      setErrMsg(\"Enter Room Name or User Name\");\n    } else {\n      socket.emit(\"BE-check-user\", { roomId: roomName, userName });\n    }\n  }\n  return (\n    <MainContainer>\n      <Row>\n        <Label htmlFor=\"roomName\">Room Name</Label>\n        <Input type=\"text\" id=\"roomName\" ref={roomRef} />\n      </Row>\n      <Row>\n        <Label htmlFor=\"userName\">User Name</Label>\n        <Input type=\"text\" id=\"userName\" ref={userRef} />\n      </Row>\n      <JoinButton onClick={clickJoin}> Join </JoinButton>\n      {err ? <Error>{errMsg}</Error> : null}\n    </MainContainer>\n  );\n};\n\nconst MainContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin-top: 15px;\n  line-height: 35px;\n`;\n\nconst Label = styled.label``;\n\nconst Input = styled.input`\n  width: 150px;\n  height: 35px;\n  margin-left: 15px;\n  padding-left: 10px;\n  outline: none;\n  border: none;\n  border-radius: 5px;\n`;\n\nconst Error = styled.div`\n  margin-top: 10px;\n  font-size: 20px;\n  color: #e85a71;\n`;\n\nconst JoinButton = styled.button`\n  height: 40px;\n  margin-top: 35px;\n  outline: none;\n  border: none;\n  border-radius: 15px;\n  color: #d8e9ef;\n  background-color: #4ea1d3;\n  font-size: 25px;\n  font-weight: 500;\n\n  :hover {\n    background-color: #7bb1d1;\n    cursor: pointer;\n  }\n`;\n\nexport default Main;\n","import React, { useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nconst VideoCard = (props) => {\n  const ref = useRef();\n  const { peer, mic, video } = props;\n\n  useEffect(() => {\n    peer.on(\"stream\", (stream) => {\n      ref.current.srcObject = stream;\n    });\n    peer.on(\"track\", (track, stream) => {});\n  }, [peer]);\n\n  return (\n    <UserVid>\n      <Video playsInline autoPlay ref={ref} />\n      <Toggle>\n        {mic ? (\n          <FaIcon className=\"fas fa-microphone\"></FaIcon>\n        ) : (\n          <FaIcon\n            style={{ right: \"15px\" }}\n            className=\"fas fa-microphone-slash\"\n          ></FaIcon>\n        )}\n        {video ? (\n          <FaIcon className=\"fas fa-video\"></FaIcon>\n        ) : (\n          <FaIcon\n            style={{ left: \"15px\" }}\n            className=\"fas fa-video-slash\"\n          ></FaIcon>\n        )}\n      </Toggle>\n    </UserVid>\n  );\n};\n\nconst Video = styled.video`\n  width: 100%;\n  height: 100%;\n`;\n\nconst Toggle = styled.div`\n  position: absolute;\n  bottom: 10px;\n  right: 0;\n  z-index: 5;\n`;\nconst UserVid = styled.div`\n  position: relative;\n`;\nconst FaIcon = styled.i`\n  font-size: 15px;\n  margin-right: 10px;\n`;\nexport default VideoCard;\n","import React, { useCallback } from \"react\";\nimport styled from \"styled-components\";\n\nconst BottomBar = ({\n  clickChat,\n  clickCameraDevice,\n  goToBack,\n  toggleCameraAudio,\n  userVideoAudio,\n  clickScreenSharing,\n  screenShare,\n  videoDevices,\n  showVideoDevices,\n  setShowVideoDevices,\n  showUserList,\n  usersCount,\n}) => {\n  const handleToggle = useCallback(\n    (e) => {\n      setShowVideoDevices((state) => !state);\n    },\n    [setShowVideoDevices]\n  );\n\n  return (\n    <Bar>\n      <Center>\n        <div style={{ position: \"relative\" }}>\n          <CameraButton onClick={toggleCameraAudio} data-switch=\"video\">\n            <div>\n              {userVideoAudio.video ? (\n                <FaIcon className=\"fas fa-video\"></FaIcon>\n              ) : (\n                <FaIcon className=\"fas fa-video-slash\"></FaIcon>\n              )}\n            </div>\n            <Text>Camera</Text>\n            {showVideoDevices && (\n              <SwitchList>\n                {videoDevices.length > 0 &&\n                  videoDevices.map((device) => {\n                    return (\n                      <div\n                        key={device.deviceId}\n                        onClick={clickCameraDevice}\n                        data-value={device.deviceId}\n                      >\n                        {device.label}\n                      </div>\n                    );\n                  })}\n                <div>Switch Camera</div>\n              </SwitchList>\n            )}\n          </CameraButton>\n          <SwitchMenu onClick={handleToggle}>\n            <i className=\"fas fa-angle-up\"></i>\n          </SwitchMenu>\n        </div>\n        <CameraButton onClick={toggleCameraAudio} data-switch=\"audio\">\n          <div>\n            {userVideoAudio.audio ? (\n              <FaIcon className=\"fas fa-microphone\"></FaIcon>\n            ) : (\n              <FaIcon className=\"fas fa-microphone-slash\"></FaIcon>\n            )}\n          </div>\n          <Text>Audio</Text>\n        </CameraButton>\n        <ScreenButton onClick={clickScreenSharing}>\n          <div>\n            <FaIcon\n              className={`fas fa-desktop ${screenShare ? \"sharing\" : \"\"}`}\n            ></FaIcon>\n          </div>\n          {screenShare ? <Text>Stop Sharing</Text> : <Text>Share Screen</Text>}\n        </ScreenButton>\n        <ChatButton onClick={clickChat}>\n          <div>\n            <FaIcon className=\"fas fa-comments\"></FaIcon>\n          </div>\n          <Text>Chat</Text>\n        </ChatButton>\n        <ChatButton onClick={showUserList}>\n          <Barge>\n            <Text>{usersCount}</Text>\n          </Barge>\n          <div>\n            <FaIcon className=\"fas fa-users\"></FaIcon>\n          </div>\n          <Text>Participants</Text>\n        </ChatButton>\n      </Center>\n      <Right>\n        <StopButton onClick={goToBack}>\n          <Text>End Call</Text>\n        </StopButton>\n      </Right>\n    </Bar>\n  );\n};\n\nconst Bar = styled.div`\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 500;\n  background-color: #008b8b;\n  z-index: 100;\n`;\nconst Text = styled.span`\n  font-size: 13px;\n  @media (max-width: 700px) {\n    font-size: 11px;\n  }\n`;\nconst Barge = styled.span`\n  background: #673ab7;\n  border-radius: 50px;\n  position: absolute;\n  right: 0px;\n  top: -2px;\n  padding: 3px;\n`;\nconst Center = styled.div`\n  flex: 1;\n  flex-wrap: wrap;\n  display: flex;\n  justify-content: center;\n`;\n\nconst Right = styled.div``;\n\nconst ChatButton = styled.div`\n  width: 75px;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n  position: relative;\n  :hover {\n    background-color: #12aaaa;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n`;\n\nconst ScreenButton = styled.div`\n  width: auto;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #12aaaa;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  .sharing {\n    color: #ee2560;\n  }\n`;\n\nconst FaIcon = styled.i`\n  font-size: 20px;\n\n  @media (max-width: 700px) {\n    font-size: 16px;\n  }\n`;\n\nconst StopButton = styled.div`\n  width: 70px;\n  height: 30px;\n  border: none;\n  font-size: 0.9375rem;\n  line-height: 30px;\n  margin-right: 15px;\n  background-color: #ee2560;\n  border-radius: 15px;\n\n  :hover {\n    background-color: #f25483;\n    cursor: pointer;\n  }\n`;\n\nconst CameraButton = styled.div`\n  position: relative;\n  width: 75px;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #12aaaa;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n\n  .fa-microphone-slash {\n    color: #ee2560;\n  }\n\n  .fa-video-slash {\n    color: #ee2560;\n  }\n`;\n\nconst SwitchMenu = styled.div`\n  display: flex;\n  position: absolute;\n  width: 20px;\n  top: 0;\n  right: 0;\n  z-index: 1;\n\n  :hover {\n    background-color: #12aaaa;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n\n  > i {\n    width: 90%;\n    font-size: calc(10px + 1vmin);\n  }\n`;\n\nconst SwitchList = styled.div`\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: -65.95px;\n  background-color: #008b8b;\n  color: white;\n  padding-top: 5px;\n  padding-right: 10px;\n  padding-bottom: 5px;\n  padding-left: 10px;\n  text-align: left;\n\n  > div {\n    font-size: 0.85rem;\n    padding: 1px;\n    margin-bottom: 5px;\n\n    :not(:last-child):hover {\n      background-color: 008b8b;\n      cursor: pointer;\n    }\n  }\n\n  > div:last-child {\n    border-top: 1px solid white;\n    cursor: context-menu !important;\n  }\n`;\n\nexport default BottomBar;\n","import React, { useEffect, useState, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport socket from \"../../socket\";\nimport toast from \"react-hot-toast\";\n\nconst Chat = ({ display, roomId, openChat }) => {\n  const currentUser = sessionStorage.getItem(\"user\");\n  const [msg, setMsg] = useState([]);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef();\n\n  useEffect(() => {\n    const receiveMessageHandler = ({ msg, sender }) => {\n      setMsg((msgs) => [...msgs, { sender, msg }]);\n      if (!display) {\n        toast(\n          <span onClick={() => openChat(true)} style={{ cursor: \"pointer\" }}>\n            New Message from {sender}\n          </span>\n        );\n      }\n    };\n    socket.on(\"FE-receive-message\", receiveMessageHandler);\n    return () => {\n      socket.off(\"FE-receive-message\", receiveMessageHandler);\n    };\n  }, [display]);\n\n  // Scroll to Bottom of Message List\n  useEffect(() => {\n    scrollToBottom();\n  }, [msg]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  const sendMessage = (e) => {\n    if (e.key === \"Enter\") {\n      const msg = e.target.value;\n\n      if (msg) {\n        socket.emit(\"BE-send-message\", { roomId, msg, sender: currentUser });\n        inputRef.current.value = \"\";\n      }\n    }\n  };\n\n  return (\n    <ChatContainer className={display ? \"\" : \"width0\"}>\n      <TopHeader>Chat Room</TopHeader>\n      <ChatArea>\n        <MessageList>\n          {msg &&\n            msg.map(({ sender, msg }, idx) => {\n              if (sender !== currentUser) {\n                return (\n                  <Message key={idx}>\n                    <Name>{sender}</Name>\n                    <p>{msg}</p>\n                  </Message>\n                );\n              } else {\n                return (\n                  <UserMessage key={idx}>\n                    <Name>You</Name>\n                    <p>{msg}</p>\n                  </UserMessage>\n                );\n              }\n            })}\n          <div style={{ float: \"left\", clear: \"both\" }} ref={messagesEndRef} />\n        </MessageList>\n      </ChatArea>\n      <BottomInput\n        ref={inputRef}\n        onKeyUp={sendMessage}\n        placeholder=\"Enter your message\"\n      />\n    </ChatContainer>\n  );\n};\n\nconst ChatContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 25%;\n  hieght: 100%;\n  background-color: white;\n  transition: all 0.5s ease;\n  overflow: hidden;\n`;\n\nconst Name = styled.span`\n  font-size: 13px;\n  color: black;\n`;\n\nconst TopHeader = styled.div`\n  width: 100%;\n  margin-top: 15px;\n  font-weight: 600;\n  font-size: 20px;\n  color: black;\n`;\n\nconst ChatArea = styled.div`\n  width: 100%;\n  height: 83%;\n  max-height: 83%;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n\nconst MessageList = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n`;\n\nconst Message = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  font-size: 16px;\n  margin-top: 15px;\n  text-align: left;\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 7px;\n    border-radius: 7px;\n    font-size: 14px;\n    background: darkcyan;\n    color: white;\n  }\n`;\n\nconst UserMessage = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  width: 100%;\n  font-size: 16px;\n  margin-top: 15px;\n  text-align: right;\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 7px;\n    border-radius: 7px;\n    background-color: #2196f3;\n    color: white;\n    font-size: 14px;\n    text-align: left;\n  }\n`;\n\nconst BottomInput = styled.input`\n  bottom: 0;\n  width: 100%;\n  height: 8%;\n  padding: 15px;\n  border-top: 1px solid rgb(69, 69, 82, 0.25);\n  box-sizing: border-box;\n  opacity: 0.7;\n\n  :focus {\n    outline: none;\n  }\n`;\n\nexport default Chat;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Chat = ({ display, users }) => {\n  return (\n    <ChatContainer className={display ? \"\" : \"width0\"}>\n      <TopHeader>Users List</TopHeader>\n      <Card>\n        <Name>You</Name>\n        <div style={{ display: \"flex\", gap: \"10px\" }}>\n          <FaIcon\n            className={\n              users[\"localUser\"].audio\n                ? \"fas fa-microphone\"\n                : \"fas fa-microphone-slash\"\n            }\n          />\n          <FaIcon\n            className={\n              users[\"localUser\"].video ? \"fas fa-video\" : \"fas fa-video-slash\"\n            }\n          />\n        </div>\n      </Card>\n      {Object.entries(users).map(\n        ([key, value]) =>\n          key !== \"localUser\" && (\n            <Card key={key}>\n              <Name>{key}</Name>\n              <div style={{ display: \"flex\", gap: \"10px\" }}>\n                <FaIcon\n                  className={\n                    value.audio\n                      ? \"fas fa-microphone\"\n                      : \"fas fa-microphone-slash\"\n                  }\n                />\n                <FaIcon\n                  className={\n                    value.video ? \"fas fa-video\" : \"fas fa-video-slash\"\n                  }\n                />\n              </div>\n            </Card>\n          )\n      )}\n    </ChatContainer>\n  );\n};\n\nconst ChatContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 25%;\n  hieght: 100%;\n  background-color: white;\n  transition: all 0.5s ease;\n  overflow: hidden;\n`;\nconst FaIcon = styled.i`\n  font-size: 16px;\n`;\nconst TopHeader = styled.div`\n  width: 100%;\n  margin-top: 15px;\n  font-weight: 600;\n  font-size: 20px;\n  color: black;\n`;\nconst Card = styled.div`\n  background-color: #6269e9;\n  margin: 5px;\n  display: flex;\n  justify-content: space-between;\n  padding: 10px;\n  border-radius: 10px;\n  align-items: center;\n`;\nconst Name = styled.span`\n  font-size: 16px;\n`;\nexport default Chat;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport Peer from \"simple-peer\";\nimport styled from \"styled-components\";\nimport socket from \"../../socket\";\nimport VideoCard from \"../Video/VideoCard\";\nimport BottomBar from \"../BottomBar/BottomBar\";\nimport Chat from \"../Chat/Chat\";\nimport toast from \"react-hot-toast\";\nimport ShowAllUSer from \"../Chat/ShowAllUser\";\nconst Room = (props) => {\n  const currentUser = sessionStorage.getItem(\"user\");\n  const [peers, setPeers] = useState([]);\n  const [userVideoAudio, setUserVideoAudio] = useState({\n    localUser: { video: true, audio: true },\n  });\n  const [videoDevices, setVideoDevices] = useState([]);\n  const [displayUserList, setDisplayUserList] = useState(false);\n  const [displayChat, setDisplayChat] = useState(false);\n  const [screenShare, setScreenShare] = useState(false);\n  const [userShareScreen, setUserShareScreen] = useState(false);\n  const [showVideoDevices, setShowVideoDevices] = useState(false);\n  const peersRef = useRef([]);\n  const userVideoRef = useRef();\n  const screenTrackRef = useRef();\n  const userStream = useRef();\n  const roomId = props.match.params.roomId;\n\n  useEffect(() => {\n    // Get Video Devices\n    navigator.mediaDevices.enumerateDevices().then((devices) => {\n      const filtered = devices.filter((device) => device.kind === \"videoinput\");\n      setVideoDevices(filtered);\n    });\n\n    // Set Back Button Event\n    window.addEventListener(\"popstate\", goToBack);\n\n    // Connect Camera & Mic\n    navigator.mediaDevices\n      .getUserMedia({ video: true, audio: true })\n      .then((stream) => {\n        userVideoRef.current.srcObject = stream;\n        userStream.current = stream;\n        socket.emit(\"BE-join-room\", { roomId, userName: currentUser });\n\n        socket.on(\"FE-user-join\", (users, userName) => {\n          toast(`${userName} joined`, {\n            icon: \"ðŸ‘\",\n            style: {\n              borderRadius: \"15px\",\n            },\n          });\n          // all users\n          const peers = [];\n          users.forEach(({ userId, info }) => {\n            let { userName, video, audio } = info;\n\n            if (userName !== currentUser) {\n              const peer = createPeer(userId, socket.id, stream);\n\n              peer.userName = userName;\n              peer.peerID = userId;\n\n              peersRef.current.push({\n                peerID: userId,\n                peer,\n                userName,\n              });\n              peers.push(peer);\n\n              setUserVideoAudio((preList) => {\n                return {\n                  ...preList,\n                  [peer.userName]: { video, audio },\n                };\n              });\n            }\n          });\n          setPeers(peers);\n        });\n\n        socket.on(\"FE-receive-call\", ({ signal, from, info }) => {\n          let { userName, video, audio } = info;\n          const peerIdx = findPeer(from);\n\n          if (!peerIdx) {\n            const peer = addPeer(signal, from, stream);\n\n            peer.userName = userName;\n\n            peersRef.current.push({\n              peerID: from,\n              peer,\n              userName: userName,\n            });\n            setPeers((users) => {\n              return [...users, peer];\n            });\n            setUserVideoAudio((preList) => {\n              return {\n                ...preList,\n                [peer.userName]: { video, audio },\n              };\n            });\n          }\n        });\n\n        socket.on(\"FE-call-accepted\", ({ signal, answerId }) => {\n          const peerIdx = findPeer(answerId);\n          peerIdx.peer.signal(signal);\n        });\n\n        socket.on(\"FE-user-leave\", ({ userId, userName }) => {\n          const peerIdx = findPeer(userId);\n          peerIdx.peer.destroy();\n          setPeers((users) => {\n            users = users.filter((user) => user.peerID !== peerIdx.peer.peerID);\n            return [...users];\n          });\n          peersRef.current = peersRef.current.filter(\n            ({ peerID }) => peerID !== userId\n          );\n          setUserVideoAudio((preList) => {\n            const updatedList = Object.fromEntries(\n              Object.entries(preList).filter(([key]) => key !== userName)\n            );\n            return updatedList;\n          });\n\n          toast(`${userName} left`, {\n            style: {\n              background: \"#333\",\n              borderRadius: \"15px\",\n            },\n          });\n        });\n      });\n\n    socket.on(\"FE-toggle-camera\", ({ userId, switchTarget }) => {\n      const peerIdx = findPeer(userId);\n      setUserVideoAudio((preList) => {\n        let video = preList[peerIdx.userName].video;\n        let audio = preList[peerIdx.userName].audio;\n\n        if (switchTarget === \"video\") video = !video;\n        else audio = !audio;\n\n        return {\n          ...preList,\n          [peerIdx.userName]: { video, audio },\n        };\n      });\n    });\n\n    socket.on(\"FE-share-screen\", ({ username, isSharing }) => {\n      setUserShareScreen(isSharing);\n      if (isSharing) {\n        toast(`${username} is sharing screen`, {\n          style: {\n            borderRadius: \"15px\",\n          },\n        });\n      } else {\n        toast(\"Screen sharing stopped\", {\n          style: {\n            background: \"#d34f4f\",\n            borderRadius: \"15px\",\n          },\n        });\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  function createPeer(userId, caller, stream) {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream,\n    });\n\n    peer.on(\"signal\", (signal) => {\n      socket.emit(\"BE-call-user\", {\n        userToCall: userId,\n        from: caller,\n        signal,\n      });\n    });\n    peer.on(\"disconnect\", () => {\n      peer.destroy();\n    });\n\n    return peer;\n  }\n\n  function addPeer(incomingSignal, callerId, stream) {\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream,\n    });\n\n    peer.on(\"signal\", (signal) => {\n      socket.emit(\"BE-accept-call\", { signal, to: callerId });\n    });\n\n    peer.on(\"disconnect\", () => {\n      peer.destroy();\n    });\n\n    peer.signal(incomingSignal);\n\n    return peer;\n  }\n\n  function findPeer(id) {\n    return peersRef.current.find((p) => p.peerID === id);\n  }\n\n  const expandScreen = (e) => {\n    const elem = e.target;\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n    } else if (elem.mozRequestFullScreen) {\n      /* Firefox */\n      elem.mozRequestFullScreen();\n    } else if (elem.webkitRequestFullscreen) {\n      /* Chrome, Safari & Opera */\n      elem.webkitRequestFullscreen();\n    } else if (elem.msRequestFullscreen) {\n      /* IE/Edge */\n      elem.msRequestFullscreen();\n    }\n  };\n  function createUserVideo(peer, index, arr) {\n    return (\n      <VideoBox\n        style={{ width: \"350px\" }}\n        onClick={userShareScreen ? expandScreen : null}\n        key={index}\n      >\n        {userShareScreen && <FaIcon className=\"fas fa-expand\" />}\n        {writeUserName(peer.userName)}\n        <VideoCard\n          key={index}\n          peer={peer}\n          mic={userVideoAudio[peer.userName]?.audio}\n          video={userVideoAudio[peer.userName]?.video}\n        />\n      </VideoBox>\n    );\n  }\n\n  function writeUserName(userName, index) {\n    if (userVideoAudio.hasOwnProperty(userName)) {\n      if (!userVideoAudio[userName].video && !userShareScreen) {\n        return <UserName key={userName}>{userName}</UserName>;\n      }\n    }\n  }\n\n  const clickChat = (e) => {\n    e.stopPropagation();\n    setDisplayChat(!displayChat);\n  };\n\n  const clickUsers = (e) => {\n    e.stopPropagation();\n    setDisplayUserList(!displayUserList);\n  };\n\n  // BackButton\n  const goToBack = (e) => {\n    e.preventDefault();\n    socket.emit(\"BE-leave-room\", { roomId, leaver: currentUser });\n    sessionStorage.removeItem(\"user\");\n    window.location.href = \"/\";\n  };\n\n  const updatePeerConnections = (stream) => {\n    peersRef.current.forEach(({ peer }) => {\n      const senders = peer._pc.getSenders();\n      senders.forEach((sender) => {\n        if (sender.track.kind === \"video\") {\n          sender.replaceTrack(stream.getVideoTracks()[0]);\n        } else if (sender.track.kind === \"audio\") {\n          sender.replaceTrack(stream.getAudioTracks()[0]);\n        }\n      });\n    });\n  };\n  const toggleCameraAudio = (e) => {\n    const target = e.target.getAttribute(\"data-switch\");\n    if (target === \"video\") {\n      if (userVideoAudio[\"localUser\"].video === true) {\n        userVideoRef.current.style.display = \"none\";\n        userStream.current.getVideoTracks().forEach((track) => track.stop());\n      } else {\n        navigator.mediaDevices\n          .getUserMedia({ video: true, audio: true })\n          .then((stream) => {\n            userVideoRef.current.style.display = \"block\";\n            userVideoRef.current.srcObject = stream;\n            userStream.current = stream;\n            updatePeerConnections(stream);\n          });\n      }\n    } else {\n      const userStream = userVideoRef.current?.srcObject;\n      if (userStream) {\n        const audioTracks = userStream.getAudioTracks();\n        if (audioTracks && audioTracks.length > 0) {\n          audioTracks[0].enabled = !userVideoAudio[\"localUser\"].audio;\n        } else {\n          alert(\"No audio track found\");\n        }\n      } else {\n        alert(\"User stream not available\");\n      }\n    }\n\n    setUserVideoAudio((preList) => {\n      let videoSwitch = preList[\"localUser\"].video;\n      let audioSwitch = preList[\"localUser\"].audio;\n\n      if (target === \"video\") {\n        if (videoSwitch === true) videoSwitch = false;\n        else {\n          videoSwitch = true;\n          audioSwitch = true;\n        }\n      } else {\n        audioSwitch = !audioSwitch;\n      }\n\n      return {\n        ...preList,\n        localUser: { video: videoSwitch, audio: audioSwitch },\n      };\n    });\n\n    socket.emit(\"BE-toggle-camera-audio\", { roomId, switchTarget: target });\n  };\n\n  const clickScreenSharing = () => {\n    if (!screenShare) {\n      navigator.mediaDevices\n        .getDisplayMedia({ cursor: true })\n        .then((stream) => {\n          const screenTrack = stream.getTracks()[0];\n\n          peersRef.current.forEach(({ peer }) => {\n            const senders = peer._pc.getSenders();\n\n            senders.forEach((sender) => {\n              if (sender.track.kind === \"video\") {\n                sender.replaceTrack(screenTrack);\n              }\n            });\n          });\n          userVideoRef.current.srcObject = stream;\n          screenTrackRef.current = screenTrack;\n          setScreenShare(true);\n          socket.emit(\"BE-share-screen\", {\n            roomId,\n            username: currentUser,\n            isSharing: true,\n          });\n          screenTrack.onended = () => {\n            peersRef.current.forEach(({ peer }) => {\n              const senders = peer._pc.getSenders();\n              senders.forEach((sender) => {\n                if (sender.track.kind === \"video\") {\n                  sender.replaceTrack(userStream.current.getVideoTracks()[0]);\n                }\n              });\n            });\n            userVideoRef.current.srcObject = userStream.current;\n            socket.emit(\"BE-share-screen\", {\n              roomId,\n              currentUser,\n              isSharing: false,\n            });\n            setScreenShare(false);\n          };\n        })\n        .catch((error) => {\n          console.error(\"Error accessing screen sharing:\", error);\n        });\n    } else {\n      screenTrackRef.current.onended();\n    }\n  };\n\n  const clickBackground = () => {\n    if (!showVideoDevices) return;\n\n    setShowVideoDevices(false);\n  };\n\n  const clickCameraDevice = (event) => {\n    if (\n      event &&\n      event.target &&\n      event.target.dataset &&\n      event.target.dataset.value\n    ) {\n      const deviceId = event.target.dataset.value;\n      const enabledAudio =\n        userVideoRef.current.srcObject.getAudioTracks()[0].enabled;\n\n      navigator.mediaDevices\n        .getUserMedia({ video: { deviceId }, audio: enabledAudio })\n        .then((stream) => {\n          const newStreamTrack = stream\n            .getTracks()\n            .find((track) => track.kind === \"video\");\n          const oldStreamTrack = userStream.current\n            .getTracks()\n            .find((track) => track.kind === \"video\");\n\n          userStream.current.removeTrack(oldStreamTrack);\n          userStream.current.addTrack(newStreamTrack);\n\n          peersRef.current.forEach(({ peer }) => {\n            peer.replaceTrack(\n              oldStreamTrack,\n              newStreamTrack,\n              userStream.current\n            );\n          });\n        });\n    }\n  };\n\n  return (\n    <RoomContainer onClick={clickBackground}>\n      <VideoAndBarContainer>\n        <VideoContainer>\n          <MyVideo ref={userVideoRef} muted autoPlay playInline></MyVideo>\n          {peers &&\n            peers.map((peer, index, arr) => createUserVideo(peer, index, arr))}\n        </VideoContainer>\n        <BottomBar\n          clickScreenSharing={clickScreenSharing}\n          clickChat={clickChat}\n          clickCameraDevice={clickCameraDevice}\n          goToBack={goToBack}\n          toggleCameraAudio={toggleCameraAudio}\n          userVideoAudio={userVideoAudio[\"localUser\"]}\n          screenShare={screenShare}\n          videoDevices={videoDevices}\n          showVideoDevices={showVideoDevices}\n          setShowVideoDevices={setShowVideoDevices}\n          showUserList={clickUsers}\n          usersCount={Object.keys(userVideoAudio).length}\n        />\n      </VideoAndBarContainer>\n      <Chat display={displayChat} openChat={setDisplayChat} roomId={roomId} />\n      <ShowAllUSer display={displayUserList} users={userVideoAudio} />\n    </RoomContainer>\n  );\n};\n\nconst RoomContainer = styled.div`\n  display: flex;\n  width: 100%;\n  max-height: 100vh;\n  flex-direction: row;\n`;\n\nconst VideoContainer = styled.div`\n  max-width: 100%;\n  height: 92%;\n  position: relative;\n  display: flex;\n  overflow: auto;\n  flex-direction: row;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  align-items: center;\n  padding: 15px;\n  box-sizing: border-box;\n  gap: 10px;\n`;\nconst VideoAndBarContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100vh;\n`;\n\nconst MyVideo = styled.video`\n  width: 250px;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n`;\nconst VideoBox = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  > video {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  :hover {\n    > i {\n      display: block;\n    }\n  }\n`;\n\nconst UserName = styled.div`\n  position: absolute;\n  z-index: 1;\n  background: #673ab7;\n  bottom: 0;\n  right: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst FaIcon = styled.i`\n  position: absolute;\n  right: 15px;\n  top: 15px;\n  z-index: 1;\n`;\n\nexport default Room;\n","import React from \"react\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport Main from \"./components/Main/Main\";\nimport Room from \"./components/Room/Room\";\nimport styled from \"styled-components\";\nimport { Toaster } from \"react-hot-toast\";\nfunction App() {\n  return (\n    <BrowserRouter>\n      <AppContainer>\n        <Switch>\n          <Route exact path=\"/\" component={Main} />\n          <Route exact path=\"/room/:roomId\" component={Room} />\n        </Switch>\n        <Toaster\n          position=\"top-right\"\n          toastOptions={{\n            duration: 2000,\n            style: {\n              background: \"#008b8b\",\n              color: \"#fff\",\n              fontSize: \"16px\",\n            },\n          }}\n        />\n      </AppContainer>\n    </BrowserRouter>\n  );\n}\n\nconst AppContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(8px + 2vmin);\n  color: white;\n  background-color: #454552;\n  text-align: center;\n`;\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}